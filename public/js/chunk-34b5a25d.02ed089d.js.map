{"version":3,"sources":["webpack:///./src/views/UserPage.vue?a62e","webpack:///src/views/UserPage.vue","webpack:///./src/views/UserPage.vue?8690","webpack:///./src/views/UserPage.vue","webpack:///./src/views/UserPage.vue?0ca5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","form","model","value","callback","$$v","$set","expression","handleAvatarSuccess","beforeAvatarUpload","imgUrl","_e","slot","on","submit","cancel","staticRenderFns","data","defaultImg","nickname","username","created","getUerInfo","methods","res","isJPG","$message","error","isLt2M","console","log","$axios","post","message","type","setTimeout","$router","push","get","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,KAAK,CAACJ,EAAIO,GAAG,4BAA4BH,EAAG,UAAU,CAACI,IAAI,OAAOC,MAAM,CAAC,MAAQT,EAAIU,KAAK,cAAc,SAAS,CAACN,EAAG,eAAe,CAACK,MAAM,CAAC,MAAQ,eAAe,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,YAAc,kCAAkCE,MAAM,CAACC,MAAOZ,EAAIU,KAAa,SAAEG,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIU,KAAM,WAAYI,IAAME,WAAW,oBAAoB,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,YAAY,cAAcG,MAAM,CAAC,KAAO,GAAG,OAAS,2CAA2C,SAAW,GAAG,aAAaT,EAAIiB,oBAAoB,gBAAgBjB,EAAIkB,mBAAmB,KAAO,eAAe,CAAoB,MAAlBlB,EAAIU,KAAKS,OAAef,EAAG,MAAM,CAACE,YAAY,SAASG,MAAM,CAAC,IAAMT,EAAIU,KAAKS,UAAUnB,EAAIoB,KAAKhB,EAAG,IAAI,CAACE,YAAY,mBAAmBF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACN,EAAIO,GAAG,gCAAgCH,EAAG,KAAK,CAACJ,EAAIO,GAAG,qBAAqBH,EAAG,MAAM,CAACE,YAAY,iBAAiBG,MAAM,CAAC,KAAO,OAAOY,KAAK,OAAO,CAACrB,EAAIO,GAAG,wDAAwD,GAAGH,EAAG,eAAe,CAACA,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAWa,GAAG,CAAC,MAAQtB,EAAIuB,SAAS,CAACvB,EAAIO,GAAG,UAAUH,EAAG,YAAY,CAACK,MAAM,CAAC,KAAO,WAAWa,GAAG,CAAC,MAAQtB,EAAIwB,SAAS,CAACxB,EAAIO,GAAG,aAAa,IAAI,IAAI,MACh1CkB,EAAkB,G,0CC+CtB,GACEC,KADF,WAEI,MAAO,CACLC,WAAN,IACMjB,KAAM,CACJkB,SAAU,GACVT,OAAQ,GACRU,SAAR,MAIEC,QAAS,WACP7B,KAAK8B,cAEPC,QAAS,CACPf,oBADJ,SACA,GACMhB,KAAKS,KAAKS,OAASc,EAAIP,MAEzBR,mBAJJ,SAIA,GACM,IAAN,wBACA,qBAQM,OANKgB,GACHjC,KAAKkC,SAASC,MAAM,qBAEjBC,GACHpC,KAAKkC,SAASC,MAAM,qBAEfF,GAASG,GAElBd,OAhBJ,WAgBA,WACMe,QAAQC,IAAI,UACZtC,KAAKuC,OAAOC,KAAK,4BAAvB,6BACA,iBACU,EAAV,UACYC,QAAZ,iBACYC,KAAZ,YAGQC,YAAW,WAAnB,6BAGIpB,OA5BJ,WA6BMvB,KAAK4C,QAAQC,KAAK,MAEpBf,WA/BJ,WA+BA,WACA,sBAEM9B,KAAKuC,OAAOO,IAAI,kBAAtB,yCACA,kBACU,EAAV,kCACU,EAAV,gCACU,EAAV,yCCpGkV,I,wBCQ9UC,EAAY,eACd,EACAjD,EACA0B,GACA,EACA,KACA,WACA,MAIa,aAAAuB,E,6CCnBf,yBAAyiB,EAAG,G","file":"js/chunk-34b5a25d.02ed089d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"content\"},[_c('h2',[_vm._v(\"Modify Your Infomation\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"NickName: \"}},[_c('el-input',{attrs:{\"placeholder\":\"please type your new nickname.\"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_c('el-form-item',[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"http://3.23.127.60:3001/api/users/upload\",\"multiple\":\"\",\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"name\":\"header_img\"}},[(_vm.form.imgUrl!= null)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.imgUrl}}):_vm._e(),_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\" drag file here to upload，or\"),_c('em',[_vm._v(\" click upload\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" file type required jpg/png，no more than 500kb \")])])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"Save\")]),_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrapper\">\n    <div class=\"content\">\n      <h2>Modify Your Infomation</h2>\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n        <el-form-item label=\"NickName: \">\n          <el-input\n            v-model=\"form.nickname\"\n            placeholder=\"please type your new nickname.\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <!-- <img v-if=\"form.imgUrl\" :src=\"imgUrl\" alt=\"\" /> -->\n          \n          <el-upload\n            class=\"upload-demo\"\n            drag\n            action=\"http://3.23.127.60:3001/api/users/upload\"\n            multiple\n            :on-success=\"handleAvatarSuccess\"\n            :before-upload=\"beforeAvatarUpload\"\n            name='header_img'\n          >\n          <img v-if=\"form.imgUrl!= null\" :src=\"form.imgUrl\" class=\"avatar\">\n          \n          <!-- <img :src=\"defaultImg\" class=\"avatar\"> -->\n            <i class=\"el-icon-upload\"></i>\n            <div class=\"el-upload__text\">\n              drag file here to upload，or<em> click upload</em>\n            </div>\n            <div class=\"el-upload__tip\" slot=\"tip\">\n              file type required jpg/png，no more than 500kb\n            </div>\n          </el-upload>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submit\">Save</el-button>\n          <el-button type=\"warning\" @click=\"cancel\">Cancel</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport defaultImg from '../assets/img/logo.png'\nimport Cookie from 'js-cookie'\nexport default {\n  data() {\n    return {\n      defaultImg:defaultImg,\n      form: {\n        nickname: \"\",\n        imgUrl: '',\n        username:''\n      }\n    };\n  },\n  created: function() {\n    this.getUerInfo()\n  },\n  methods: {\n    handleAvatarSuccess(res) {\n      this.form.imgUrl = res.data\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n    submit() {\n      console.log(\"submit\");\n      this.$axios.post('/api/users/updateUserInfo',this.form).then(res=>{\n        if(res.data.code === 0){\n          this.$message({\n            message:'update success',\n            type:'success'\n          })\n        }\n        setTimeout(()=>{location.reload()},1000)\n      })\n    },\n    cancel() {\n      this.$router.push(\"/\");\n    },\n    getUerInfo(){\n      let user = Cookie.get('username')\n      // this.form.username = user\n      this.$axios.get('/api/users/info',{params:{username:user}}).then(res=>{\n        if(res.data.code === 0){\n          this.form.nickname = res.data.msg.nickname\n          this.form.imgUrl = res.data.msg.head_img\n          this.form.username = res.data.msg.username\n           \n        }\n      })\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.content {\n  width: 40%;\n  margin: 20px auto;\n  h2 {\n    margin: 20px 0 60px 0;\n  }\n}\n.avatar{\n  float: left;\n  height: 160px;\n  width: 160px;\n  border-radius: 8px;\n  margin: 10px 0 10px 10px ;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPage.vue?vue&type=template&id=51d55bd9&scoped=true&\"\nimport script from \"./UserPage.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserPage.vue?vue&type=style&index=0&id=51d55bd9&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51d55bd9\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=style&index=0&id=51d55bd9&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=style&index=0&id=51d55bd9&lang=less&scoped=true&\""],"sourceRoot":""}