(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b5a25d"],{"2cbc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"content"},[a("h2",[e._v("Modify Your Infomation")]),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"NickName: "}},[a("el-input",{attrs:{placeholder:"please type your new nickname."},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),a("el-form-item",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://3.23.127.60:3001/api/users/upload",multiple:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"header_img"}},[null!=e.form.imgUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.imgUrl}}):e._e(),a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" drag file here to upload，or"),a("em",[e._v(" click upload")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" file type required jpg/png，no more than 500kb ")])])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Save")]),a("el-button",{attrs:{type:"warning"},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1)])},n=[],r=a("4ffd"),o=a.n(r),i=a("df0f"),l=a.n(i),c={data:function(){return{defaultImg:o.a,form:{nickname:"",imgUrl:"",username:""}}},created:function(){this.getUerInfo()},methods:{handleAvatarSuccess:function(e){this.form.imgUrl=e.data},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},submit:function(){var e=this;console.log("submit"),this.$axios.post("/api/users/updateUserInfo",this.form).then((function(t){0===t.data.code&&e.$message({message:"update success",type:"success"}),setTimeout((function(){location.reload()}),1e3)}))},cancel:function(){this.$router.push("/")},getUerInfo:function(){var e=this,t=l.a.get("username");this.$axios.get("/api/users/info",{params:{username:t}}).then((function(t){0===t.data.code&&(e.form.nickname=t.data.msg.nickname,e.form.imgUrl=t.data.msg.head_img,e.form.username=t.data.msg.username)}))}}},m=c,u=(a("8a22"),a("2877")),d=Object(u["a"])(m,s,n,!1,null,"51d55bd9",null);t["default"]=d.exports},"8a22":function(e,t,a){"use strict";var s=a("d465"),n=a.n(s);n.a},d465:function(e,t,a){}}]);
//# sourceMappingURL=chunk-34b5a25d.02ed089d.js.map